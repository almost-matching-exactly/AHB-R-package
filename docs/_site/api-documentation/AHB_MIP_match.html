<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/AHB-R-package/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/AHB-R-package/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/AHB-R-package/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/AHB-R-package/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>AHB_MIP_match | AHB R Package</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="AHB_MIP_match" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Matching for causal inference with machine learning algorithms" /> <meta property="og:description" content="Matching for causal inference with machine learning algorithms" /> <link rel="canonical" href="http://localhost:4000/AHB-R-package/api-documentation/AHB_MIP_match" /> <meta property="og:url" content="http://localhost:4000/AHB-R-package/api-documentation/AHB_MIP_match" /> <meta property="og:site_name" content="AHB R Package" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-12-01T11:21:09-05:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/AHB-R-package/api-documentation/AHB_MIP_match","datePublished":"2020-12-01T11:21:09-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/AHB-R-package/api-documentation/AHB_MIP_match"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/AHB-R-package/content/logos/logo.svg"}},"headline":"AHB_MIP_match","description":"Matching for causal inference with machine learning algorithms","dateModified":"2020-12-01T11:21:09-05:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/AHB-R-package/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">AHB R Package</div> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/AHB-R-package/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/AHB-R-package/getting-started" class="nav-list-link">Getting Started</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/AHB-R-package/api-documentation" class="nav-list-link">API Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/AHB-R-package/api-documentation/AHB_fast_match" class="nav-list-link">AHB_fast_match</a></li><li class="nav-list-item active"><a href="http://localhost:4000/AHB-R-package/api-documentation/AHB_MIP_match" class="nav-list-link active">AHB_MIP_match</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/AHB-R-package/api-documentation/post-processing" class="nav-list-link">Post Processing</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/AHB-R-package/api-documentation/post-processing/ate" class="nav-list-link">ATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/AHB-R-package/api-documentation/post-processing/att" class="nav-list-link">ATT</a> </li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This package is created by the <a href="https://almost-matching-exactly.github.io">Almost Matching Exactly Lab</a>. Our site is based on the Jekyll theme <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AHB R Package" aria-label="Search AHB R Package" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/almost-matching-exactly/AHB-R-package" class="site-button" rel="noopener noreferrer" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/AHB-R-package/api-documentation">API Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>AHB_MIP_match</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="ahb_mip_match"> <a href="#ahb_mip_match" class="anchor-heading" aria-labelledby="ahb_mip_match"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AHB_MIP_match </h1> <div class="code-example"> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AHB_MIP_match</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">holdout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="n">treated_column_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"treated"</span><span class="p">,</span><span class="w">
              </span><span class="n">outcome_column_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"outcome"</span><span class="p">,</span><span class="w"> </span><span class="n">black_box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BART"</span><span class="p">,</span><span class="w"> 
              </span><span class="n">cv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">gamma0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">gamma1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">Beta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e+05</span><span class="p">,</span><span class="w"> 
              </span><span class="n">n_prune</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">holdout</span><span class="p">),</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="m">0.1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">holdout</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">data</span><span class="p">)),</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="m">0.1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">data</span><span class="p">))))</span><span class="w">
</span></code></pre></div> </div> </div> <h2 id="parameters"> <a href="#parameters" class="anchor-heading" aria-labelledby="parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parameters </h2> <div class="table-wrapper"><table class="parameters"> <tr> <td><b>data:</b><br />file, Dataframe, required</td> <td>If holdout is not a numeric value, this is the data to be matched. If holdout is a numeric scalar between 0 and 1, that proportion of data will be made into a holdout set and only the remaining proportion of data will be matched.</td> </tr> <tr> <td><b>holdout:</b><br />numeric, file, Dataframe, optional (default = 0.1)</td> <td>Holdout data used to train the outcome model. If a numeric scalar, that proportion of data will be made into a holdout set and only the remaining proportion of data will be matched. Otherwise, if a file path or dataframe is provided, that dataset will serve as the holdout data.</td> </tr> <tr> <td><b>treated_column_name:</b><br />string, optional (default = 'treated')</td> <td>The name of the column which specifies whether a unit is treated or control.</td> </tr> <tr> <td><b>outcome_column_name:</b><br />string, optional (default = 'outcome')</td> <td>The name of the column which specifies each unit outcome.</td> </tr> <tr> <td><b>black_box:</b><br />string, optional (default = 'BART)</td> <td>Denotes the method to be used to generate outcome model Y. If "BART" and cv = F, uses dbarts::bart with keeptrees = TRUE, keepevery = 10, verbose = FALSE, k = 2 and ntree =200 and then the default predict method to estimate the outcome. If "BART" and cv = T, k and ntree will be best values from cross validation. Defaults to 'BART'. There will be multiple choices about black_box in the future.</td> </tr> <tr> <td><b>cv:</b><br />logical, optional (default = T)</td> <td>If TURE, do cross-validation on the train set to generate outcome model Y</td> </tr> <tr> <td><b>gamma0:</b><br />A numeric scalar, optional (default = 3)</td> <td>A numeric value, one of hyperparameters in global MIP that controls the weight placed on the outcome function portion of the loss.</td> </tr> <tr> <td><b>gamma1:</b><br />A numeric scalar, optional (default = 3)</td> <td>A numeric value, one of hyperparameters in global MIP that controls the weight placed on the outcome function portion of the loss.</td> </tr> <tr> <td><b>beta:</b><br />A numeric scalar, optional (default = 2)</td> <td>A numeric value, one of hyperparameters in global MIP that controls the weight placed on the outcome function portion of the loss.</td> </tr> <tr> <td><b>m:</b><br />A integer scalar, optional (default = 1)</td> <td>Determines the at least number of control units that the box contains when estimating causal effects for a single treatment unit.</td> </tr> <tr> <td><b>M:</b><br />A positive integer scalar, optional (default = 1e+5)</td> <td>Controls the weight placed on decision variable wij, which is an indicator for whether a unit is in the box.</td> </tr> <tr> <td><b>n_prune:</b><br />A positive inetger scalar, optional (default = 0.1* nrow(dataset to be matched))</td> <td>Determines the number of candidate units selected to run the mip on for constructing the box. Dataset mentioned below is refered to the dataset for matching. If you match a small dataset with the number of units smaller than 400, it will run MIP on all dataset for each treated unit. If you match larger dataset and your memory of your computer cannot support such much computation, plase adjust n_prune below 400 or even smaller. The smaller number of candidate units selected to run the mip on for constructing the box, the faster this program runs.</td> </tr> </table></div> <h2 id="returns"> <a href="#returns" class="anchor-heading" aria-labelledby="returns"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Returns </h2> <div class="table-wrapper"><table> <tr> <td><b>$data:</b><br />dataframe</td> <td>Data set that was matched by AHB_MIP_match(). If holdout is not a numeric value, then <b><span>$</span>data</b> is the same as the data input into AHB_MIP_match(). If holdout is a numeric scalar between 0 and 1, <b><span>$</span>data</b> is the remaining proportion of data that were matched.</td> </tr> <tr> <td><b>$units_id:</b><br />integer vector</td> <td>A integer vector with unit_id for test treated units</td> </tr> <tr> <td><b>$CATE:</b><br />numeric vector</td> <td>A numeric vector with the conditional average treatment effect estimates for every test treated unit in its matched group in <b><span>$</span>MGs</b></td> </tr> <tr> <td><b>$bins:</b><br />numeric vector</td> <td>A numeric vector with the conditional average treatment effect estimates for every test treated unit in its matched group in <b><span>$</span>MGs</b></td> </tr> <tr> <td><b>$MGs:</b><br />list</td> <td>A list of all the matched groups formed by AHB_MIP_match(). For each test treated unit, each row contains all unit_id of the other units that fall into its box, including itself.</td> </tr> </table></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
